---
import BaseLayout from './BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import RelatedArticles from '../components/RelatedArticles.astro';

interface Props {
  title: string;
  description: string;
  pubDate: Date;
  updatedDate?: Date;
  heroImage?: string;
  category: string;
}

const { title, description, pubDate, updatedDate, heroImage, category } = Astro.props;

const formattedPubDate = new Date(pubDate).toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});

const formattedUpdatedDate = updatedDate ? new Date(updatedDate).toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
}) : null;
---

<BaseLayout title={title} description={description} image={heroImage}>
  <Header />
  
  <main class="container-custom section-padding">
    <article class="max-w-4xl mx-auto">
      <!-- Breadcrumbs -->
      <nav class="text-sm mb-6">
        <ol class="flex items-center space-x-2 text-gray-600">
          <li><a href="/" class="hover:text-caramel">Home</a></li>
          <li>/</li>
          <li><a href="/blog" class="hover:text-caramel">Blog</a></li>
          <li>/</li>
          <li class="text-gray-800">{category}</li>
        </ol>
      </nav>

      <!-- Article Header -->
      <header class="mb-8">
        <h1 class="mb-4">{title}</h1>
        <div class="flex items-center space-x-4 text-gray-600 text-sm">
          <time datetime={pubDate.toISOString()}>
            Published: {formattedPubDate}
          </time>
          {formattedUpdatedDate && (
            <>
              <span>â€¢</span>
              <time datetime={updatedDate?.toISOString()}>
                Updated: {formattedUpdatedDate}
              </time>
            </>
          )}
        </div>
      </header>

      <!-- Hero Image -->
      {heroImage && (
        <div class="mb-8">
          <img 
            src={heroImage} 
            alt={title}
            class="w-full h-auto rounded-lg shadow-lg"
          />
        </div>
      )}

      <!-- Article Content -->
      <div class="prose prose-lg max-w-none">
        <slot />
      </div>

      <!-- Related Articles -->
      <div class="mt-12 pt-8 border-t border-gray-200">
        <RelatedArticles category={category} currentSlug={Astro.url.pathname} />
      </div>
    </article>
  </main>

  <Footer />
</BaseLayout>